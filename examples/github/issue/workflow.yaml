name: GitHub Create Issue

# 1) Load GITHUB_TOKEN from env.example (cat + KV capture)
# 2) Prompt for repo (owner/repo), issue title, and body
# 3) Create issue via GitHub CLI (gh). Run from this directory. Requires: gh (https://cli.github.com/)

baseDir: ./

steps:
  - run: 'cat env.example'
    captures:
      - kv: GITHUB_TOKEN
        as: GITHUB_TOKEN
  - prompt:
      message: "Repository (owner/repo, e.g. octocat/Hello-World):"
      as: repo
  - prompt:
      message: "Issue title:"
      as: issue_title
  - prompt:
      message: "Issue body (optional, one line):"
      as: issue_body
  - run: 'GH_TOKEN="{{GITHUB_TOKEN}}" gh issue create -R "{{repo}}" --title "{{issue_title}}" --body "{{issue_body}}"'
  - run: 'echo "Issue created."'
