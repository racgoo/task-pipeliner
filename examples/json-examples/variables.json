{
  "name": "Variables Example",
  "steps": [
    {
      "prompt": {
        "message": "Enter project name:",
        "as": "project_name",
        "default": "my-project"
      }
    },
    {
      "prompt": {
        "message": "Enter version:",
        "as": "version",
        "default": "1.0.0"
      }
    },
    {
      "when": {
        "var": "project_name"
      },
      "run": "echo \"Building {{project_name}}...\""
    },
    {
      "when": {
        "all": [
          {
            "var": "project_name"
          },
          {
            "var": "version"
          }
        ]
      },
      "run": "echo \"Building {{project_name}} version {{version}}...\""
    },
    {
      "choose": {
        "message": "Select environment:",
        "options": [
          {
            "id": "dev",
            "label": "Development"
          },
          {
            "id": "staging",
            "label": "Staging"
          },
          {
            "id": "prod",
            "label": "Production"
          }
        ],
        "as": "env"
      }
    },
    {
      "when": {
        "var": {
          "env": "prod"
        }
      },
      "prompt": {
        "message": "Enter production deployment reason:",
        "as": "deploy_reason"
      }
    },
    {
      "when": {
        "all": [
          {
            "var": "project_name"
          },
          {
            "var": "version"
          },
          {
            "any": [
              {
                "var": {
                  "env": "dev"
                }
              },
              {
                "var": {
                  "env": "staging"
                }
              },
              {
                "var": "deploy_reason"
              }
            ]
          }
        ]
      },
      "run": "echo \"Deploying {{project_name}} v{{version}}...\""
    },
    {
      "when": {
        "all": [
          {
            "var": {
              "env": "prod"
            }
          },
          {
            "var": "deploy_reason"
          }
        ]
      },
      "run": "echo \"Production deployment reason: {{deploy_reason}}\""
    }
  ]
}

